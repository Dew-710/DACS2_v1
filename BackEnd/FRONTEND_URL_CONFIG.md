# Frontend URL Configuration

## Problem
QR codes generated by the backend were using `http://localhost:3000` instead of the public Cloudflare tunnel URL.

## Solution
The backend now reads the frontend URL from `application.properties` with support for environment variable override.

## Configuration Options

### Option 1: Update application.properties (Recommended for development)
Edit `src/main/resources/application.properties`:

```properties
# Frontend URL for QR Code generation
frontend.url=https://your-frontend-cloudflare-tunnel.trycloudflare.com
```

### Option 2: Set Environment Variable (Recommended for production)
Before running the application, set the environment variable:

**Windows (PowerShell):**
```powershell
$env:FRONTEND_URL="https://your-frontend-cloudflare-tunnel.trycloudflare.com"
.\mvnw.cmd spring-boot:run
```

**Windows (Command Prompt):**
```cmd
set FRONTEND_URL=https://your-frontend-cloudflare-tunnel.trycloudflare.com
mvnw.cmd spring-boot:run
```

**Linux/Mac:**
```bash
export FRONTEND_URL=https://your-frontend-cloudflare-tunnel.trycloudflare.com
./mvnw spring-boot:run
```

### Option 3: IntelliJ IDEA Configuration
1. Open **Run** â†’ **Edit Configurations...**
2. Select your Spring Boot configuration
3. Add environment variable: `FRONTEND_URL=https://your-url.trycloudflare.com`
4. Click **OK**

## Current Configuration
Currently set to: `https://hats-election-incl-thru.trycloudflare.com`

Update this URL when your Cloudflare tunnel URL changes.

## Verification
After starting the backend, check the logs. When you send a QR code, you should see:
```
"qrUrl": "https://your-frontend-url.trycloudflare.com/menu/ABC123"
```

Not:
```
"qrUrl": "http://localhost:3000/menu/ABC123"
```

## Files Changed
- `ImageController.java` - Now uses `FrontendConfig`
- `FrontendConfig.java` - New configuration class
- `application.properties` - Added `frontend.url` property

